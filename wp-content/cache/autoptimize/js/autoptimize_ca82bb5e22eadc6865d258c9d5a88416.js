/*! jQuery Migrate v1.4.1 | (c) jQuery Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}a.migrateVersion="1.4.1";var f={};a.migrateWarnings=[],b.console&&b.console.log&&b.console.log("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') might use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.find,s=a.parseJSON,t=/^\s*</,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,v=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,w=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,e,f){var g,h;return b&&"string"==typeof b&&!a.isPlainObject(e)&&(g=w.exec(a.trim(b)))&&g[0]&&(t.test(b)||d("$(html) HTML strings must start with '<' character"),g[3]&&d("$(html) HTML text after last tag is ignored"),"#"===g[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),e&&e.context&&e.context.nodeType&&(e=e.context),a.parseHTML)?q.call(this,a.parseHTML(g[2],e&&e.ownerDocument||e||document,!0),e,f):(h=q.apply(this,arguments),b&&b.selector!==c?(h.selector=b.selector,h.context=b.context):(h.selector="string"==typeof b?b:"",b&&(h.context=b.nodeType?b:e||document)),h)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&u.test(a))try{document.querySelector(a)}catch(c){a=a.replace(v,function(a,b,c,d){return"["+b+c+'"'+d+'"]'});try{document.querySelector(a),d("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){d("Attribute selector with '#' was not fixed: "+b[0])}}return r.apply(this,b)};var x;for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&(a.find[x]=r[x]);a.parseJSON=function(a){return a?s.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.boxModel=a.support.boxModel="CSS1Compat"===document.compatMode,e(a,"boxModel",a.boxModel,"jQuery.boxModel is deprecated"),e(a.support,"boxModel",a.support.boxModel,"jQuery.support.boxModel is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){var f=a.fn.init.call(this,d,e,c);return f instanceof b?f:b(f)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.fn.size=function(){return d("jQuery.fn.size() is deprecated; use the .length property"),this.length};var y=!1;a.swap&&a.each(["height","width","reliableMarginRight"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return y=!0,a=d.apply(this,arguments),y=!1,a})}),a.swap=function(a,b,c,e){var f,g,h={};y||d("jQuery.swap() is undocumented and deprecated");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=c.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f},a.ajaxSetup({converters:{"text json":a.parseJSON}});var z=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?z.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var A=/\/(java|ecma)script/i;a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||A.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var B=a.event.add,C=a.event.remove,D=a.event.trigger,E=a.fn.toggle,F=a.fn.live,G=a.fn.die,H=a.fn.load,I="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",J=new RegExp("\\b(?:"+I+")\\b"),K=/(?:^|\s)hover(\.\S+|)\b/,L=function(b){return"string"!=typeof b||a.event.special.hover?b:(K.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(K,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&J.test(b)&&d("AJAX events should be attached to document: "+b),B.call(this,a,L(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){C.call(this,a,L(b)||"",c,d,e)},a.each(["load","unload","error"],function(b,c){a.fn[c]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===c&&"string"==typeof a[0]?H.apply(this,a):(d("jQuery.fn."+c+"() is deprecated"),a.splice(0,0,c),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return E.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),F?F.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),G?G.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||J.test(a)||d("Global events are undocumented and deprecated"),D.call(this,a,b,c||document,e)},a.each(I.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,Array.prototype.slice.call(arguments,1),b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}}),a.event.special.ready={setup:function(){this===document&&d("'ready' event is deprecated")}};var M=a.fn.andSelf||a.fn.addBack,N=a.fn.find;if(a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),M.apply(this,arguments)},a.fn.find=function(a){var b=N.apply(this,arguments);return b.context=this.context,b.selector=this.selector?this.selector+" "+a:a,b},a.Callbacks){var O=a.Deferred,P=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var c=O(),e=c.promise();return c.pipe=e.pipe=function(){var b=arguments;return d("deferred.pipe() is deprecated"),a.Deferred(function(d){a.each(P,function(f,g){var h=a.isFunction(b[f])&&b[f];c[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[g[0]+"With"](this===e?d.promise():this,h?[b]:arguments)})}),b=null}).promise()},c.isResolved=function(){return d("deferred.isResolved is deprecated"),"resolved"===c.state()},c.isRejected=function(){return d("deferred.isRejected is deprecated"),"rejected"===c.state()},b&&b.call(c,c),c}}}(jQuery,window);
;
/*! Backstretch - v2.0.4 - 2013-06-19
 * http://srobbin.com/jquery-plugins/backstretch/
 * Copyright (c) 2013 Scott Robbin; Licensed MIT */
(function($,window,undefined){'use strict';$.fn.backstretch=function(images,options){if(images===undefined||images.length===0){$.error("No images were supplied for Backstretch");}
if($(window).scrollTop()===0){window.scrollTo(0,0);}
return this.each(function(){var $this=$(this),obj=$this.data('backstretch');if(obj){if(typeof images=='string'&&typeof obj[images]=='function'){obj[images](options);return;}
options=$.extend(obj.options,options);obj.destroy(true);}
obj=new Backstretch(this,images,options);$this.data('backstretch',obj);});};$.backstretch=function(images,options){return $('body').backstretch(images,options).data('backstretch');};$.expr[':'].backstretch=function(elem){return $(elem).data('backstretch')!==undefined;};$.fn.backstretch.defaults={centeredX:true,centeredY:true,duration:5000,fade:0};var styles={wrap:{left:0,top:0,overflow:'hidden',margin:0,padding:0,height:'100%',width:'100%',zIndex:-999999},img:{position:'absolute',display:'none',margin:0,padding:0,border:'none',width:'auto',height:'auto',maxHeight:'none',maxWidth:'none',zIndex:-999999}};var Backstretch=function(container,images,options){this.options=$.extend({},$.fn.backstretch.defaults,options||{});this.images=$.isArray(images)?images:[images];$.each(this.images,function(){$('<img />')[0].src=this;});this.isBody=container===document.body;this.$container=$(container);this.$root=this.isBody?supportsFixedPosition?$(window):$(document):this.$container;var $existing=this.$container.children(".backstretch").first();this.$wrap=$existing.length?$existing:$('<div class="backstretch"></div>').css(styles.wrap).appendTo(this.$container);if(!this.isBody){var position=this.$container.css('position'),zIndex=this.$container.css('zIndex');this.$container.css({position:position==='static'?'relative':position,zIndex:zIndex==='auto'?0:zIndex,background:'none'});this.$wrap.css({zIndex:-999998});}
this.$wrap.css({position:this.isBody&&supportsFixedPosition?'fixed':'absolute'});this.index=0;this.show(this.index);$(window).on('resize.backstretch',$.proxy(this.resize,this)).on('orientationchange.backstretch',$.proxy(function(){if(this.isBody&&window.pageYOffset===0){window.scrollTo(0,1);this.resize();}},this));};Backstretch.prototype={resize:function(){try{var bgCSS={left:0,top:0},rootWidth=this.isBody?this.$root.width():this.$root.innerWidth(),bgWidth=rootWidth,rootHeight=this.isBody?(window.innerHeight?window.innerHeight:this.$root.height()):this.$root.innerHeight(),bgHeight=bgWidth/this.$img.data('ratio'),bgOffset;if(bgHeight>=rootHeight){bgOffset=(bgHeight-rootHeight)/2;if(this.options.centeredY){bgCSS.top='-'+bgOffset+'px';}}else{bgHeight=rootHeight;bgWidth=bgHeight*this.$img.data('ratio');bgOffset=(bgWidth-rootWidth)/2;if(this.options.centeredX){bgCSS.left='-'+bgOffset+'px';}}
this.$wrap.css({width:rootWidth,height:rootHeight}).find('img:not(.deleteable)').css({width:bgWidth,height:bgHeight}).css(bgCSS);}catch(err){}
return this;},show:function(newIndex){if(Math.abs(newIndex)>this.images.length-1){return;}
var self=this,oldImage=self.$wrap.find('img').addClass('deleteable'),evtOptions={relatedTarget:self.$container[0]};self.$container.trigger($.Event('backstretch.before',evtOptions),[self,newIndex]);this.index=newIndex;clearInterval(self.interval);self.$img=$('<img />').css(styles.img).bind('load',function(e){var imgWidth=this.width||$(e.target).width(),imgHeight=this.height||$(e.target).height();$(this).data('ratio',imgWidth/imgHeight);$(this).fadeIn(self.options.speed||self.options.fade,function(){oldImage.remove();if(!self.paused){self.cycle();}
$(['after','show']).each(function(){self.$container.trigger($.Event('backstretch.'+this,evtOptions),[self,newIndex]);});});self.resize();}).appendTo(self.$wrap);self.$img.attr('src',self.images[newIndex]);return self;},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0);},prev:function(){return this.show(this.index===0?this.images.length-1:this.index-1);},pause:function(){this.paused=true;return this;},resume:function(){this.paused=false;this.next();return this;},cycle:function(){if(this.images.length>1){clearInterval(this.interval);this.interval=setInterval($.proxy(function(){if(!this.paused){this.next();}},this),this.options.duration);}
return this;},destroy:function(preserveBackground){$(window).off('resize.backstretch orientationchange.backstretch');clearInterval(this.interval);if(!preserveBackground){this.$wrap.remove();}
this.$container.removeData('backstretch');}};var supportsFixedPosition=(function(){var ua=navigator.userAgent,platform=navigator.platform,wkmatch=ua.match(/AppleWebKit\/([0-9]+)/),wkversion=!!wkmatch&&wkmatch[1],ffmatch=ua.match(/Fennec\/([0-9]+)/),ffversion=!!ffmatch&&ffmatch[1],operammobilematch=ua.match(/Opera Mobi\/([0-9]+)/),omversion=!!operammobilematch&&operammobilematch[1],iematch=ua.match(/MSIE ([0-9]+)/),ieversion=!!iematch&&iematch[1];return!(((platform.indexOf("iPhone")>-1||platform.indexOf("iPad")>-1||platform.indexOf("iPod")>-1)&&wkversion&&wkversion<534)||(window.operamini&&({}).toString.call(window.operamini)==="[object OperaMini]")||(operammobilematch&&omversion<7458)||(ua.indexOf("Android")>-1&&wkversion&&wkversion<533)||(ffversion&&ffversion<6)||("palmGetResource"in window&&wkversion&&wkversion<534)||(ua.indexOf("MeeGo")>-1&&ua.indexOf("NokiaBrowser/8.5.0")>-1)||(ieversion&&ieversion<=6));}());}(jQuery,window));
(function($){$(document).ready(function(){$("#custom-header").backstretch([BackStretchImg.src],{duration:3000,fade:750});});})(jQuery);
WPGroHo=jQuery.extend({my_hash:'',data:{},renderers:{},syncProfileData:function(hash,id){if(!WPGroHo.data[hash]){WPGroHo.data[hash]={};jQuery('div.grofile-hash-map-'+hash+' span').each(function(){WPGroHo.data[hash][this.className]=jQuery(this).text();});}
WPGroHo.appendProfileData(WPGroHo.data[hash],hash,id);},appendProfileData:function(data,hash,id){for(var key in data){if(jQuery.isFunction(WPGroHo.renderers[key])){return WPGroHo.renderers[key](data[key],hash,id,key);}
jQuery('#'+id).find('h4').after(jQuery('<p class="grav-extra '+key+'" />').html(data[key]));}}},WPGroHo);jQuery(document).ready(function(){if('undefined'===typeof Gravatar){return;}
Gravatar.profile_cb=function(h,d){WPGroHo.syncProfileData(h,d);};Gravatar.my_hash=WPGroHo.my_hash;Gravatar.init('body','#wpadminbar');});
(function(){var is_webkit=navigator.userAgent.toLowerCase().indexOf('webkit')>-1,is_opera=navigator.userAgent.toLowerCase().indexOf('opera')>-1,is_ie=navigator.userAgent.toLowerCase().indexOf('msie')>-1;if((is_webkit||is_opera||is_ie)&&'undefined'!==typeof(document.getElementById)){var eventMethod=(window.addEventListener)?'addEventListener':'attachEvent';window[eventMethod]('hashchange',function(){var element=document.getElementById(location.hash.substring(1));if(element){if(!/^(?:a|select|input|button|textarea)$/i.test(element.tagName))
element.tabIndex=-1;element.focus();}},false);}})();
(function($){$(document).ready(function(){function showSection(){var menu=$('#mobile-link');var menuShow=$('#mobile-block');function switchClass($myvar){if($myvar.hasClass('active')){$myvar.removeClass('active');}else{$myvar.addClass('active');}}
menu.on('click',function(){switchClass($(this));menuShow.slideToggle();});}
$(window).on('load',showSection);});$('.main-navigation .page_item_has_children > a, .main-navigation .menu-item-has-children > a').append('<div class="showsub-toggle" aria-expanded="false"></div>');$('.showsub-toggle').click(function(e){e.preventDefault();$(this).toggleClass('sub-on');$(this).parent().next('.children, .sub-menu').toggleClass('sub-on');$(this).attr('aria-expanded',$(this).attr('aria-expanded')=='false'?'true':'false');});})(jQuery);(function($){var $window=$(window);var nav=$('#masthead');$window.scroll(function(){if($window.scrollTop()>=300){nav.addClass('fixed-header');}
else{nav.removeClass('fixed-header');}});})(jQuery);
(function(window){var facebookEmbed=function(){var fbroot,src;if('undefined'!==typeof FB&&FB.XFBML){FB.XFBML.parse();}else{fbroot=document.createElement('div');fbroot.id='fb-root';document.getElementsByTagName('body')[0].appendChild(fbroot);src='//connect.facebook.net/'+jpfbembed.locale+'/sdk.js#xfbml=1';if(jpfbembed.appid){src+='&appId='+jpfbembed.appid;}
src+='&version=v2.3';jQuery.getScript(src);}};window.fbAsyncInit=function(){FB.init({appId:jpfbembed.appid,version:'v2.3'});FB.XFBML.parse();};if('undefined'!==typeof infiniteScroll){jQuery(document.body).on('post-load',facebookEmbed);}
facebookEmbed();})(this);
!function(a,b){"use strict";function c(){if(!e){e=!0;var a,c,d,f,g=-1!==navigator.appVersion.indexOf("MSIE 10"),h=!!navigator.userAgent.match(/Trident.*rv:11\./),i=b.querySelectorAll("iframe.wp-embedded-content");for(c=0;c<i.length;c++){if(d=i[c],!d.getAttribute("data-secret"))f=Math.random().toString(36).substr(2,10),d.src+="#?secret="+f,d.setAttribute("data-secret",f);if(g||h)a=d.cloneNode(!0),a.removeAttribute("security"),d.parentNode.replaceChild(a,d)}}}var d=!1,e=!1;if(b.querySelector)if(a.addEventListener)d=!0;if(a.wp=a.wp||{},!a.wp.receiveEmbedMessage)if(a.wp.receiveEmbedMessage=function(c){var d=c.data;if(d.secret||d.message||d.value)if(!/[^a-zA-Z0-9]/.test(d.secret)){var e,f,g,h,i,j=b.querySelectorAll('iframe[data-secret="'+d.secret+'"]'),k=b.querySelectorAll('blockquote[data-secret="'+d.secret+'"]');for(e=0;e<k.length;e++)k[e].style.display="none";for(e=0;e<j.length;e++)if(f=j[e],c.source===f.contentWindow){if(f.removeAttribute("style"),"height"===d.message){if(g=parseInt(d.value,10),g>1e3)g=1e3;else if(~~g<200)g=200;f.height=g}if("link"===d.message)if(h=b.createElement("a"),i=b.createElement("a"),h.href=f.getAttribute("src"),i.href=d.value,i.host===h.host)if(b.activeElement===f)a.top.location.href=d.value}else;}},d)a.addEventListener("message",a.wp.receiveEmbedMessage,!1),b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1)}(window,document);
(function(root,factory){if(typeof exports=='object')module.exports=factory()
else if(typeof define=='function'&&define.amd)define(factory)
else root.Spinner=factory()}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
if(s[prop]!==undefined)return prop
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'auto',left:'auto',position:'relative'}
function Spinner(o){if(typeof this=='undefined')return new Spinner(o)
this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width,ep,tp
if(target){target.insertBefore(el,target.firstChild||null)
tp=pos(target)
ep=pos(el)
css(el,{left:(o.left=='auto'?tp.x-ep.x+(target.offsetWidth>>1):parseInt(o.left,10)+mid)+'px',top:(o.top=='auto'?tp.y-ep.y+(target.offsetHeight>>1):parseInt(o.top,10)+mid)+'px'})}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(o.color,'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:o.color,opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));
(function(factory){if(typeof exports=='object'){factory(require('jquery'),require('spin'))}
else if(typeof define=='function'&&define.amd){define(['jquery','spin'],factory)}
else{if(!window.Spinner)throw new Error('Spin.js not present')
factory(window.jQuery,window.Spinner)}}(function($,Spinner){$.fn.spin=function(opts,color){return this.each(function(){var $this=$(this),data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner;}
if(opts!==false){opts=$.extend({color:color||$this.css('color')},$.fn.spin.presets[opts]||opts)
if(typeof opts.right!=='undefined'&&typeof opts.length!=='undefined'&&typeof opts.width!=='undefined'&&typeof opts.radius!=='undefined'){var pad=$this.css('padding-left');pad=(typeof pad==='undefined')?0:parseInt(pad,10);opts.left=$this.outerWidth()-(2*(opts.length+opts.width+opts.radius))-pad-opts.right;delete opts.right;}
data.spinner=new Spinner(opts).spin(this)}})}
$.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}));(function($){$.fn.spin.presets.wp={trail:60,speed:1.3};$.fn.spin.presets.small=$.extend({lines:8,length:2,width:2,radius:3},$.fn.spin.presets.wp);$.fn.spin.presets.medium=$.extend({lines:8,length:4,width:3,radius:5},$.fn.spin.presets.wp);$.fn.spin.presets.large=$.extend({lines:10,length:6,width:4,radius:7},$.fn.spin.presets.wp);$.fn.spin.presets['small-left']=$.extend({left:5},$.fn.spin.presets.small);$.fn.spin.presets['small-right']=$.extend({right:5},$.fn.spin.presets.small);$.fn.spin.presets['medium-left']=$.extend({left:5},$.fn.spin.presets.medium);$.fn.spin.presets['medium-right']=$.extend({right:5},$.fn.spin.presets.medium);$.fn.spin.presets['large-left']=$.extend({left:5},$.fn.spin.presets.large);$.fn.spin.presets['large-right']=$.extend({right:5},$.fn.spin.presets.large);})(jQuery);
jQuery(document).ready(function($){var overlay,comments,gallery,container,nextButton,previousButton,info,transitionBegin,caption,resizeTimeout,photo_info,close_hint,commentInterval,lastSelectedSlide,screenPadding=110,originalOverflow=$('body').css('overflow'),originalHOverflow=$('html').css('overflow'),proportion=85,last_known_location_hash='',imageMeta,titleAndDescription,commentForm,leftColWrapper,scrollPos;if(window.innerWidth<=760){screenPadding=Math.round((window.innerWidth/760)*110);if(screenPadding<40&&(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch)){screenPadding=0;}}
if('undefined'===typeof Date.now){Date.now=function now(){return new Date().getTime();};}
var keyListener=function(e){switch(e.which){case 38:e.preventDefault();container.scrollTop(container.scrollTop()-100);break;case 40:e.preventDefault();container.scrollTop(container.scrollTop()+100);break;case 39:e.preventDefault();gallery.jp_carousel('next');break;case 37:case 8:e.preventDefault();gallery.jp_carousel('previous');break;case 27:e.preventDefault();container.jp_carousel('close');break;default:break;}};var resizeListener=function(){clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){gallery.jp_carousel('slides').jp_carousel('fitSlide',true);gallery.jp_carousel('updateSlidePositions',true);gallery.jp_carousel('fitMeta',true);},200);};var prepareGallery=function(){if(!overlay){overlay=$('<div></div>').addClass('jp-carousel-overlay').css({'position':'absolute','top':0,'right':0,'bottom':0,'left':0});var buttons='<a class="jp-carousel-commentlink" href="#">'+jetpackCarouselStrings.comment+'</a>';if(1===Number(jetpackCarouselStrings.is_logged_in)){}
buttons=$('<div class="jp-carousel-buttons">'+buttons+'</div>');caption=$('<h2 itemprop="caption description"></h2>');photo_info=$('<div class="jp-carousel-photo-info"></div>').append(caption);imageMeta=$('<div></div>').addClass('jp-carousel-image-meta').css({'float':'right','margin-top':'20px','width':'250px'});imageMeta.append(buttons).append('<ul class=\'jp-carousel-image-exif\' style=\'display:none;\'></ul>').append('<a class=\'jp-carousel-image-download\' style=\'display:none;\'></a>').append('<div class=\'jp-carousel-image-map\' style=\'display:none;\'></div>');titleAndDescription=$('<div></div>').addClass('jp-carousel-titleanddesc').css({'width':'100%','margin-top':imageMeta.css('margin-top')});var commentFormMarkup='<div id="jp-carousel-comment-form-container">';if(jetpackCarouselStrings.local_comments_commenting_as&&jetpackCarouselStrings.local_comments_commenting_as.length){if(1!==Number(jetpackCarouselStrings.is_logged_in)&&1===Number(jetpackCarouselStrings.comment_registration)){commentFormMarkup+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+'</div>';}else{commentFormMarkup+='<form id="jp-carousel-comment-form">';commentFormMarkup+='<textarea name="comment" class="jp-carousel-comment-form-field jp-carousel-comment-form-textarea" id="jp-carousel-comment-form-comment-field" placeholder="'+jetpackCarouselStrings.write_comment+'"></textarea>';commentFormMarkup+='<div id="jp-carousel-comment-form-submit-and-info-wrapper">';commentFormMarkup+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+'</div>';commentFormMarkup+='<input type="submit" name="submit" class="jp-carousel-comment-form-button" id="jp-carousel-comment-form-button-submit" value="'+jetpackCarouselStrings.post_comment+'" />';commentFormMarkup+='<span id="jp-carousel-comment-form-spinner">&nbsp;</span>';commentFormMarkup+='<div id="jp-carousel-comment-post-results"></div>';commentFormMarkup+='</div>';commentFormMarkup+='</form>';}}
commentFormMarkup+='</div>';commentForm=$(commentFormMarkup).css({'width':'100%','margin-top':'20px','color':'#999'});comments=$('<div></div>').addClass('jp-carousel-comments').css({'width':'100%','bottom':'10px','margin-top':'20px'});var commentsLoading=$('<div id="jp-carousel-comments-loading"><span>'+jetpackCarouselStrings.loading_comments+'</span></div>').css({'width':'100%','bottom':'10px','margin-top':'20px'});var leftWidth=($(window).width()-(screenPadding*2))-(imageMeta.width()+40);leftWidth+='px';leftColWrapper=$('<div></div>').addClass('jp-carousel-left-column-wrapper').css({'width':Math.floor(leftWidth)}).append(titleAndDescription).append(commentForm).append(comments).append(commentsLoading);var fadeaway=$('<div></div>').addClass('jp-carousel-fadeaway');info=$('<div></div>').addClass('jp-carousel-info').css({'top':Math.floor(($(window).height()/100)*proportion),'left':screenPadding,'right':screenPadding}).append(photo_info).append(imageMeta);if(window.innerWidth<=760){photo_info.remove().insertAfter(titleAndDescription);info.prepend(leftColWrapper);}
else{info.append(leftColWrapper);}
var targetBottomPos=($(window).height()-parseInt(info.css('top'),10))+'px';nextButton=$('<div><span></span></div>').addClass('jp-carousel-next-button').css({'right':'15px'}).hide();previousButton=$('<div><span></span></div>').addClass('jp-carousel-previous-button').css({'left':0}).hide();nextButton.add(previousButton).css({'position':'fixed','top':'40px','bottom':targetBottomPos,'width':screenPadding});gallery=$('<div></div>').addClass('jp-carousel').css({'position':'absolute','top':0,'bottom':targetBottomPos,'left':0,'right':0});close_hint=$('<div class="jp-carousel-close-hint"><span>&times;</span></div>').css({position:'fixed'});container=$('<div></div>').addClass('jp-carousel-wrap').addClass('jp-carousel-transitions');if('white'===jetpackCarouselStrings.background_color){container.addClass('jp-carousel-light');}
container.attr('itemscope','');container.attr('itemtype','https://schema.org/ImageGallery');container.css({'position':'fixed','top':0,'right':0,'bottom':0,'left':0,'z-index':2147483647,'overflow-x':'hidden','overflow-y':'auto','direction':'ltr'}).hide().append(overlay).append(gallery).append(fadeaway).append(info).append(nextButton).append(previousButton).append(close_hint).appendTo($('body')).click(function(e){var target=$(e.target),wrap=target.parents('div.jp-carousel-wrap'),data=wrap.data('carousel-extra'),slide=wrap.find('div.selected'),attachment_id=slide.data('attachment-id');data=data||[];if(target.is(gallery)||target.parents().add(target).is(close_hint)){container.jp_carousel('close');}else if(target.hasClass('jp-carousel-commentlink')){e.preventDefault();e.stopPropagation();$(window).unbind('keydown',keyListener);container.animate({scrollTop:parseInt(info.position()['top'],10)},'fast');$('#jp-carousel-comment-form-submit-and-info-wrapper').slideDown('fast');$('#jp-carousel-comment-form-comment-field').focus();}else if(target.hasClass('jp-carousel-comment-login')){var url=jetpackCarouselStrings.login_url+'%23jp-carousel-'+attachment_id;window.location.href=url;}else if(target.parents('#jp-carousel-comment-form-container').length){var textarea=$('#jp-carousel-comment-form-comment-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});var emailField=$('#jp-carousel-comment-form-email-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});var authorField=$('#jp-carousel-comment-form-author-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});var urlField=$('#jp-carousel-comment-form-url-field').blur(function(){$(window).bind('keydown',keyListener);}).focus(function(){$(window).unbind('keydown',keyListener);});if(textarea&&textarea.attr('id')===target.attr('id')){$(window).unbind('keydown',keyListener);$('#jp-carousel-comment-form-submit-and-info-wrapper').slideDown('fast');}else if(target.is('input[type="submit"]')){e.preventDefault();e.stopPropagation();$('#jp-carousel-comment-form-spinner').spin('small','white');var ajaxData={action:'post_attachment_comment',nonce:jetpackCarouselStrings.nonce,blog_id:data['blog_id'],id:attachment_id,comment:textarea.val()};if(!ajaxData['comment'].length){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-comment-field','error':jetpackCarouselStrings.no_comment_text});return;}
if(1!==Number(jetpackCarouselStrings.is_logged_in)){ajaxData['email']=emailField.val();ajaxData['author']=authorField.val();ajaxData['url']=urlField.val();if(1===Number(jetpackCarouselStrings.require_name_email)){if(!ajaxData['email'].length||!ajaxData['email'].match('@')){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-email-field','error':jetpackCarouselStrings.no_comment_email});return;}else if(!ajaxData['author'].length){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-author-field','error':jetpackCarouselStrings.no_comment_author});return;}}}
$.ajax({type:'POST',url:jetpackCarouselStrings.ajaxurl,data:ajaxData,dataType:'json',success:function(response){if('approved'===response.comment_status){$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_approved+'</span>').slideDown('fast');}else if('unapproved'===response.comment_status){$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_unapproved+'</span>').slideDown('fast');}else{$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-error">'+jetpackCarouselStrings.comment_post_error+'</span>').slideDown('fast');}
gallery.jp_carousel('clearCommentTextAreaValue');gallery.jp_carousel('getComments',{attachment_id:attachment_id,offset:0,clear:true});$('#jp-carousel-comment-form-button-submit').val(jetpackCarouselStrings.post_comment);$('#jp-carousel-comment-form-spinner').spin(false);},error:function(){gallery.jp_carousel('postCommentError',{'field':'jp-carousel-comment-form-comment-field','error':jetpackCarouselStrings.comment_post_error});return;}});}}else if(!target.parents('.jp-carousel-info').length){container.jp_carousel('next');}}).bind('jp_carousel.afterOpen',function(){$(window).bind('keydown',keyListener);$(window).bind('resize',resizeListener);gallery.opened=true;resizeListener();}).bind('jp_carousel.beforeClose',function(){var scroll=$(window).scrollTop();$(window).unbind('keydown',keyListener);$(window).unbind('resize',resizeListener);$(window).scrollTop(scroll);$('.jp-carousel-previous-button').hide();$('.jp-carousel-next-button').hide();}).bind('jp_carousel.afterClose',function(){if(window.location.hash&&history.back){history.back();}
last_known_location_hash='';gallery.opened=false;}).on('transitionend.jp-carousel ','.jp-carousel-slide',function(e){if('transform'===e.originalEvent.propertyName){var transitionMultiplier=((Date.now()-transitionBegin)/1000)/e.originalEvent.elapsedTime;container.off('transitionend.jp-carousel');if(transitionMultiplier>=2){$('.jp-carousel-transitions').removeClass('jp-carousel-transitions');}}});$('.jp-carousel-wrap').touchwipe({wipeLeft:function(e){e.preventDefault();gallery.jp_carousel('next');},wipeRight:function(e){e.preventDefault();gallery.jp_carousel('previous');},preventDefaultEvents:false});nextButton.add(previousButton).click(function(e){e.preventDefault();e.stopPropagation();if(nextButton.is(this)){gallery.jp_carousel('next');}else{gallery.jp_carousel('previous');}});}};var processSingleImageGallery=function(){$('a img[data-attachment-id]').each(function(){var container=$(this).parent();if(container.parent('.gallery-icon').length){return;}
if('undefined'===typeof($(container).attr('href'))){return;}
var valid=false;if($(container).attr('href').split('?')[0]===$(this).attr('data-orig-file').split('?')[0]&&1===Number(jetpackCarouselStrings.single_image_gallery_media_file)){valid=true;}
if($(container).attr('href')===$(this).attr('data-permalink')){valid=true;}
if(!valid){return;}
$(container).addClass('single-image-gallery');$(container).data('carousel-extra',{blog_id:Number(jetpackCarouselStrings.blog_id)});});};var methods={testForData:function(gallery){gallery=$(gallery);return!(!gallery.length||!gallery.data('carousel-extra'));},testIfOpened:function(){return!!('undefined'!==typeof(gallery)&&'undefined'!==typeof(gallery.opened)&&gallery.opened);},openOrSelectSlide:function(index){if(!$(this).jp_carousel('testIfOpened')){$(this).jp_carousel('open',{start_index:index});}else{gallery.jp_carousel('selectSlideAtIndex',index);}},open:function(options){var settings={'items_selector':'.gallery-item [data-attachment-id], .tiled-gallery-item [data-attachment-id], img[data-attachment-id]','start_index':0},data=$(this).data('carousel-extra');if(!data){return;}
prepareGallery(data);if(gallery.jp_carousel('testIfOpened')){return;}
originalOverflow=$('body').css('overflow');$('body').css('overflow','hidden');originalHOverflow=$('html').css('overflow');$('html').css('overflow','hidden');scrollPos=$(window).scrollTop();container.data('carousel-extra',data);return this.each(function(){var $this=$(this);if(options){$.extend(settings,options);}
if(-1===settings.start_index){settings.start_index=0;}
container.trigger('jp_carousel.beforeOpen').fadeIn('fast',function(){container.trigger('jp_carousel.afterOpen');gallery.jp_carousel('initSlides',$this.find(settings.items_selector),settings.start_index).jp_carousel('selectSlideAtIndex',settings.start_index);});gallery.html('');});},selectSlideAtIndex:function(index){var slides=this.jp_carousel('slides'),selected=slides.eq(index);if(0===selected.length){selected=slides.eq(0);}
gallery.jp_carousel('selectSlide',selected,false);return this;},close:function(){$('body').css('overflow',originalOverflow);$('html').css('overflow',originalHOverflow);this.jp_carousel('clearCommentTextAreaValue');return container.trigger('jp_carousel.beforeClose').fadeOut('fast',function(){container.trigger('jp_carousel.afterClose');$(window).scrollTop(scrollPos);});},next:function(){this.jp_carousel('previousOrNext','nextSlide');},previous:function(){this.jp_carousel('previousOrNext','prevSlide');},previousOrNext:function(slideSelectionMethodName){if(!this.jp_carousel('hasMultipleImages')){return false;}
var slide=gallery.jp_carousel(slideSelectionMethodName);if(slide){container.animate({scrollTop:0},'fast');this.jp_carousel('clearCommentTextAreaValue');this.jp_carousel('selectSlide',slide);}},selectedSlide:function(){return this.find('.selected');},setSlidePosition:function(x){transitionBegin=Date.now();return this.css({'-webkit-transform':'translate3d('+x+'px,0,0)','-moz-transform':'translate3d('+x+'px,0,0)','-ms-transform':'translate('+x+'px,0)','-o-transform':'translate('+x+'px,0)','transform':'translate3d('+x+'px,0,0)'});},updateSlidePositions:function(animate){var current=this.jp_carousel('selectedSlide'),galleryWidth=gallery.width(),currentWidth=current.width(),previous=gallery.jp_carousel('prevSlide'),next=gallery.jp_carousel('nextSlide'),previousPrevious=previous.prev(),nextNext=next.next(),left=Math.floor((galleryWidth-currentWidth)*0.5);current.jp_carousel('setSlidePosition',left).show();gallery.jp_carousel('fitInfo',animate);var direction=lastSelectedSlide.is(current.prevAll())?1:-1;if(1===direction){if(!nextNext.is(previous)){nextNext.jp_carousel('setSlidePosition',galleryWidth+next.width()).show();}
if(!previousPrevious.is(next)){previousPrevious.jp_carousel('setSlidePosition',-previousPrevious.width()-currentWidth).show();}}else{if(!nextNext.is(previous)){nextNext.jp_carousel('setSlidePosition',galleryWidth+currentWidth).show();}}
previous.jp_carousel('setSlidePosition',Math.floor(-previous.width()+(screenPadding*0.75))).show();next.jp_carousel('setSlidePosition',Math.ceil(galleryWidth-(screenPadding*0.75))).show();},selectSlide:function(slide,animate){lastSelectedSlide=this.find('.selected').removeClass('selected');var slides=gallery.jp_carousel('slides').css({'position':'fixed'}),current=$(slide).addClass('selected').css({'position':'relative'}),attachmentId=current.data('attachment-id'),previous=gallery.jp_carousel('prevSlide'),next=gallery.jp_carousel('nextSlide'),previousPrevious=previous.prev(),nextNext=next.next(),animated,captionHtml;gallery.jp_carousel('loadFullImage',current);caption.hide();if(next.length===0&&slides.length<=2){$('.jp-carousel-next-button').hide();}else{$('.jp-carousel-next-button').show();}
if(previous.length===0&&slides.length<=2){$('.jp-carousel-previous-button').hide();}else{$('.jp-carousel-previous-button').show();}
animated=current.add(previous).add(previousPrevious).add(next).add(nextNext).jp_carousel('loadSlide');slides.not(animated).hide();gallery.jp_carousel('updateSlidePositions',animate);container.trigger('jp_carousel.selectSlide',[current]);gallery.jp_carousel('getTitleDesc',{title:current.data('title'),desc:current.data('desc')});var imageMeta=current.data('image-meta');gallery.jp_carousel('updateExif',imageMeta);gallery.jp_carousel('updateFullSizeLink',current);gallery.jp_carousel('updateMap',imageMeta);gallery.jp_carousel('testCommentsOpened',current.data('comments-opened'));gallery.jp_carousel('getComments',{'attachment_id':attachmentId,'offset':0,'clear':true});$('#jp-carousel-comment-post-results').slideUp();if(current.data('caption')){captionHtml=$('<div />').text(current.data('caption')).html();if(captionHtml===$('<div />').text(current.data('title')).html()){$('.jp-carousel-titleanddesc-title').fadeOut('fast').empty();}
if(captionHtml===$('<div />').text(current.data('desc')).html()){$('.jp-carousel-titleanddesc-desc').fadeOut('fast').empty();}
caption.html(current.data('caption')).fadeIn('slow');}else{caption.fadeOut('fast').empty();}
if(jetpackCarouselStrings.stats){new Image().src=document.location.protocol+'//pixel.wp.com/g.gif?'+
jetpackCarouselStrings.stats+'&post='+encodeURIComponent(attachmentId)+'&rand='+Math.random();}
$(next).add(previous).each(function(){gallery.jp_carousel('loadFullImage',$(this));});window.location.hash=last_known_location_hash='#jp-carousel-'+attachmentId;},slides:function(){return this.find('.jp-carousel-slide');},slideDimensions:function(){return{width:$(window).width()-(screenPadding*2),height:Math.floor($(window).height()/100*proportion-60)};},loadSlide:function(){return this.each(function(){var slide=$(this);slide.find('img').one('load',function(){slide.jp_carousel('fitSlide',false);});});},bestFit:function(){var max=gallery.jp_carousel('slideDimensions'),orig=this.jp_carousel('originalDimensions'),orig_ratio=orig.width/orig.height,w_ratio=1,h_ratio=1,width,height;if(orig.width>max.width){w_ratio=max.width/orig.width;}
if(orig.height>max.height){h_ratio=max.height/orig.height;}
if(w_ratio<h_ratio){width=max.width;height=Math.floor(width/orig_ratio);}else if(h_ratio<w_ratio){height=max.height;width=Math.floor(height*orig_ratio);}else{width=orig.width;height=orig.height;}
return{width:width,height:height};},fitInfo:function(){var current=this.jp_carousel('selectedSlide'),size=current.jp_carousel('bestFit');photo_info.css({'left':Math.floor((info.width()-size.width)*0.5),'width':Math.floor(size.width)});return this;},fitMeta:function(animated){var newInfoTop={top:Math.floor($(window).height()/100*proportion+5)+'px'};var newLeftWidth={width:(info.width()-(imageMeta.width()+80))+'px'};if(animated){info.animate(newInfoTop);leftColWrapper.animate(newLeftWidth);}else{info.animate(newInfoTop);leftColWrapper.css(newLeftWidth);}},fitSlide:function(){return this.each(function(){var $this=$(this),dimensions=$this.jp_carousel('bestFit'),method='css',max=gallery.jp_carousel('slideDimensions');dimensions.left=0;dimensions.top=Math.floor((max.height-dimensions.height)*0.5)+40;$this[method](dimensions);});},texturize:function(text){text=''+text;text=text.replace(/'/g,'&#8217;').replace(/&#039;/g,'&#8217;').replace(/[\u2019]/g,'&#8217;');text=text.replace(/"/g,'&#8221;').replace(/&#034;/g,'&#8221;').replace(/&quot;/g,'&#8221;').replace(/[\u201D]/g,'&#8221;');text=text.replace(/([\w]+)=&#[\d]+;(.+?)&#[\d]+;/g,'$1="$2"');return $.trim(text);},initSlides:function(items,start_index){if(items.length<2){$('.jp-carousel-next-button, .jp-carousel-previous-button').hide();}else{$('.jp-carousel-next-button, .jp-carousel-previous-button').show();}
items.each(function(){var src_item=$(this),orig_size=src_item.data('orig-size')||'',max=gallery.jp_carousel('slideDimensions'),parts=orig_size.split(','),medium_file=src_item.data('medium-file')||'',large_file=src_item.data('large-file')||'',src;orig_size={width:parseInt(parts[0],10),height:parseInt(parts[1],10)};src=src_item.data('orig-file');src=gallery.jp_carousel('selectBestImageSize',{orig_file:src,orig_width:orig_size.width,orig_height:orig_size.height,max_width:max.width,max_height:max.height,medium_file:medium_file,large_file:large_file});$(this).data('gallery-src',src);});if(0!==start_index){$('<img/>')[0].src=$(items[start_index]).data('gallery-src');}
var useInPageThumbnails=items.first().closest('.tiled-gallery.type-rectangular').length>0;items.each(function(i){var src_item=$(this),attachment_id=src_item.data('attachment-id')||0,comments_opened=src_item.data('comments-opened')||0,image_meta=src_item.data('image-meta')||{},orig_size=src_item.data('orig-size')||'',thumb_size={width:src_item[0].naturalWidth,height:src_item[0].naturalHeight},title=src_item.data('image-title')||'',description=src_item.data('image-description')||'',caption=src_item.parents('.gallery-item').find('.gallery-caption').html()||'',src=src_item.data('gallery-src')||'',medium_file=src_item.data('medium-file')||'',large_file=src_item.data('large-file')||'',orig_file=src_item.data('orig-file')||'';var tiledCaption=src_item.parents('div.tiled-gallery-item').find('div.tiled-gallery-caption').html();if(tiledCaption){caption=tiledCaption;}
if(attachment_id&&orig_size.length){title=gallery.jp_carousel('texturize',title);description=gallery.jp_carousel('texturize',description);caption=gallery.jp_carousel('texturize',caption);var image=$('<img/>').attr('src','data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7').css('width','100%').css('height','100%');var slide=$('<div class="jp-carousel-slide" itemprop="associatedMedia" itemscope itemtype="https://schema.org/ImageObject"></div>').hide().css({'left':i<start_index?-1000:gallery.width()}).append(image).appendTo(gallery).data('src',src).data('title',title).data('desc',description).data('caption',caption).data('attachment-id',attachment_id).data('permalink',src_item.parents('a').attr('href')).data('orig-size',orig_size).data('comments-opened',comments_opened).data('image-meta',image_meta).data('medium-file',medium_file).data('large-file',large_file).data('orig-file',orig_file).data('thumb-size',thumb_size);if(useInPageThumbnails){slide.data('preview-image',src_item.attr('src')).css({'background-image':'url("'+src_item.attr('src')+'")','background-size':'100% 100%','background-position':'center center'});}
slide.jp_carousel('fitSlide',false);}});return this;},selectBestImageSize:function(args){if('object'!==typeof args){args={};}
if('undefined'===typeof args.orig_file){return'';}
if('undefined'===typeof args.orig_width||'undefined'===typeof args.max_width){return args.orig_file;}
if('undefined'===typeof args.medium_file||'undefined'===typeof args.large_file){return args.orig_file;}
var imageLinkParser=document.createElement('a');imageLinkParser.href=args.large_file;var isPhotonUrl=(imageLinkParser.hostname.match(/^i[\d]{1}.wp.com$/i)!=null);var medium_size_parts=gallery.jp_carousel('getImageSizeParts',args.medium_file,args.orig_width,isPhotonUrl);var large_size_parts=gallery.jp_carousel('getImageSizeParts',args.large_file,args.orig_width,isPhotonUrl);var large_width=parseInt(large_size_parts[0],10),large_height=parseInt(large_size_parts[1],10),medium_width=parseInt(medium_size_parts[0],10),medium_height=parseInt(medium_size_parts[1],10);args.orig_max_width=args.max_width;args.orig_max_height=args.max_height;if('undefined'!==typeof window.devicePixelRatio&&window.devicePixelRatio>1){args.max_width=args.max_width*window.devicePixelRatio;args.max_height=args.max_height*window.devicePixelRatio;}
if(large_width>=args.max_width||large_height>=args.max_height){return args.large_file;}
if(medium_width>=args.max_width||medium_height>=args.max_height){return args.medium_file;}
if(isPhotonUrl){var largeFileIndex=args.large_file.lastIndexOf('?');var origPhotonUrl=args.large_file;if(-1!==largeFileIndex){origPhotonUrl=args.large_file.substring(0,largeFileIndex);if(args.orig_width>args.max_width||args.orig_height>args.max_height){origPhotonUrl+='?fit='+args.orig_max_width+'%2C'+args.orig_max_height;}}
return origPhotonUrl;}
return args.orig_file;},getImageSizeParts:function(file,orig_width,isPhotonUrl){var size=isPhotonUrl?file.replace(/.*=([\d]+%2C[\d]+).*$/,'$1'):file.replace(/.*-([\d]+x[\d]+)\..+$/,'$1');var size_parts=(size!==file)?(isPhotonUrl?size.split('%2C'):size.split('x')):[orig_width,0];if('9999'===size_parts[0]){size_parts[0]='0';}
if('9999'===size_parts[1]){size_parts[1]='0';}
return size_parts;},originalDimensions:function(){var splitted=$(this).data('orig-size').split(',');return{width:parseInt(splitted[0],10),height:parseInt(splitted[1],10)};},format:function(args){if('object'!==typeof args){args={};}
if(!args.text||'undefined'===typeof args.text){return;}
if(!args.replacements||'undefined'===typeof args.replacements){return args.text;}
return args.text.replace(/{(\d+)}/g,function(match,number){return typeof args.replacements[number]!=='undefined'?args.replacements[number]:match;});},shutterSpeed:function(speed){var denominator;if(speed>=1){return Math.round(speed*10)/10+'s';}
denominator=Math.round(1/speed);return'1/'+denominator+'s';},parseTitleDesc:function(value){if(!value.match(' ')&&value.match('_')){return'';}
$(['CIMG','DSC_','DSCF','DSCN','DUW','GEDC','IMG','JD','MGP','PICT','Imagen','Foto','DSC','Scan','SANY','SAM','Screen Shot [0-9]+']).each(function(key,val){var regex=new RegExp('^'+val);if(regex.test(value)){value='';return;}});return value;},getTitleDesc:function(data){var title='',desc='',markup='',target;target=$('div.jp-carousel-titleanddesc','div.jp-carousel-wrap');target.hide();title=gallery.jp_carousel('parseTitleDesc',data.title)||'';desc=gallery.jp_carousel('parseTitleDesc',data.desc)||'';if(title.length||desc.length){if($('<div />').html(title).text()===$('<div />').html(desc).text()){title='';}
markup=(title.length)?'<div class="jp-carousel-titleanddesc-title">'+title+'</div>':'';markup+=(desc.length)?'<div class="jp-carousel-titleanddesc-desc">'+desc+'</div>':'';target.html(markup).fadeIn('slow');}
$('div#jp-carousel-comment-form-container').css('margin-top','20px');$('div#jp-carousel-comments-loading').css('margin-top','20px');},updateExif:function(meta){if(!meta||1!==Number(jetpackCarouselStrings.display_exif)){return false;}
var $ul=$('<ul class=\'jp-carousel-image-exif\'></ul>');$.each(meta,function(key,val){if(0===parseFloat(val)||!val.length||-1===$.inArray(key,$.makeArray(jetpackCarouselStrings.meta_data))){return;}
switch(key){case'focal_length':val=val+'mm';break;case'shutter_speed':val=gallery.jp_carousel('shutterSpeed',val);break;case'aperture':val='f/'+val;break;}
$ul.append('<li><h5>'+jetpackCarouselStrings[key]+'</h5>'+val+'</li>');});$('div.jp-carousel-image-meta ul.jp-carousel-image-exif').replaceWith($ul);},updateFullSizeLink:function(current){if(!current||!current.data){return false;}
var original,origSize=current.data('orig-size').split(','),imageLinkParser=document.createElement('a');imageLinkParser.href=current.data('src').replace(/\?.+$/,'');if(imageLinkParser.hostname.match(/^i[\d]{1}.wp.com$/i)!==null){original=imageLinkParser.href;}else{original=current.data('orig-file').replace(/\?.+$/,'');}
var permalink=$('<a>'+gallery.jp_carousel('format',{'text':jetpackCarouselStrings.download_original,'replacements':origSize})+'</a>').addClass('jp-carousel-image-download').attr('href',original).attr('target','_blank');$('div.jp-carousel-image-meta a.jp-carousel-image-download').replaceWith(permalink);},updateMap:function(meta){if(!meta.latitude||!meta.longitude||1!==Number(jetpackCarouselStrings.display_geo)){return;}
var latitude=meta.latitude,longitude=meta.longitude,$metabox=$('div.jp-carousel-image-meta','div.jp-carousel-wrap'),$mapbox=$('<div></div>'),style='&scale=2&style=feature:all|element:all|invert_lightness:true|hue:0x0077FF|saturation:-50|lightness:-5|gamma:0.91';$mapbox.addClass('jp-carousel-image-map').html('<img width="154" height="154" src="https://maps.googleapis.com/maps/api/staticmap?\
       center='+latitude+','+longitude+'&\
       zoom=8&\
       size=154x154&\
       sensor=false&\
       markers=size:medium%7Ccolor:blue%7C'+latitude+','+longitude+style+'" class="gmap-main" />\
       \
      <div class="gmap-topright"><div class="imgclip"><img width="175" height="154" src="https://maps.googleapis.com/maps/api/staticmap?\
       center='+latitude+','+longitude+'&\
       zoom=3&\
       size=175x154&\
       sensor=false&\
       markers=size:small%7Ccolor:blue%7C'+latitude+','+longitude+style+'"c /></div></div>\
       \
      ').prependTo($metabox);},testCommentsOpened:function(opened){if(1===parseInt(opened,10)){$('.jp-carousel-buttons').fadeIn('fast');commentForm.fadeIn('fast');}else{$('.jp-carousel-buttons').fadeOut('fast');commentForm.fadeOut('fast');}},getComments:function(args){clearInterval(commentInterval);if('object'!==typeof args){return;}
if('undefined'===typeof args.attachment_id||!args.attachment_id){return;}
if(!args.offset||'undefined'===typeof args.offset||args.offset<1){args.offset=0;}
var comments=$('.jp-carousel-comments'),commentsLoading=$('#jp-carousel-comments-loading').show();if(args.clear){comments.hide().empty();}
$.ajax({type:'GET',url:jetpackCarouselStrings.ajaxurl,dataType:'json',data:{action:'get_attachment_comments',nonce:jetpackCarouselStrings.nonce,id:args.attachment_id,offset:args.offset},success:function(data){if(args.clear){comments.fadeOut('fast').empty();}
$(data).each(function(){var comment=$('<div></div>').addClass('jp-carousel-comment').attr('id','jp-carousel-comment-'+this['id']).html('<div class="comment-gravatar">'+
this['gravatar_markup']+'</div>'+'<div class="comment-author">'+
this['author_markup']+'</div>'+'<div class="comment-date">'+
this['date_gmt']+'</div>'+'<div class="comment-content">'+
this['content']+'</div>');comments.append(comment);clearInterval(commentInterval);commentInterval=setInterval(function(){if(($('.jp-carousel-overlay').height()-150)<$('.jp-carousel-wrap').scrollTop()+$(window).height()){gallery.jp_carousel('getComments',{attachment_id:args.attachment_id,offset:args.offset+10,clear:false});clearInterval(commentInterval);}},300);});var current=$('.jp-carousel div.selected');if(current&&current.data&&current.data('attachment-id')!=args.attachment_id){comments.fadeOut('fast');comments.empty();return;}
$('.jp-carousel-overlay').height($(window).height()+titleAndDescription.height()+commentForm.height()+((comments.height()>0)?comments.height():imageMeta.height())+200);comments.show();commentsLoading.hide();},error:function(xhr,status,error){console.log('Comment get fail...',xhr,status,error);comments.fadeIn('fast');commentsLoading.fadeOut('fast');}});},postCommentError:function(args){if('object'!==typeof args){args={};}
if(!args.field||'undefined'===typeof args.field||!args.error||'undefined'===typeof args.error){return;}
$('#jp-carousel-comment-post-results').slideUp('fast').html('<span class="jp-carousel-comment-post-error">'+args.error+'</span>').slideDown('fast');$('#jp-carousel-comment-form-spinner').spin(false);},setCommentIframeSrc:function(attachment_id){var iframe=$('#jp-carousel-comment-iframe');if(iframe&&iframe.length){iframe.attr('src',iframe.attr('src').replace(/(postid=)\d+/,'$1'+attachment_id));iframe.attr('src',iframe.attr('src').replace(/(%23.+)?$/,'%23jp-carousel-'+attachment_id));}},clearCommentTextAreaValue:function(){var commentTextArea=$('#jp-carousel-comment-form-comment-field');if(commentTextArea){commentTextArea.val('');}},nextSlide:function(){var slides=this.jp_carousel('slides');var selected=this.jp_carousel('selectedSlide');if(selected.length===0||(slides.length>2&&selected.is(slides.last()))){return slides.first();}
return selected.next();},prevSlide:function(){var slides=this.jp_carousel('slides');var selected=this.jp_carousel('selectedSlide');if(selected.length===0||(slides.length>2&&selected.is(slides.first()))){return slides.last();}
return selected.prev();},loadFullImage:function(slide){var image=slide.find('img:first');if(!image.data('loaded')){image.on('load.jetpack',function(){image.off('load.jetpack');$(this).closest('.jp-carousel-slide').css('background-image','');});if(!slide.data('preview-image')||(slide.data('thumb-size')&&slide.width()>slide.data('thumb-size').width)){image.attr('src',image.closest('.jp-carousel-slide').data('src')).attr('itemprop','image');}else{image.attr('src',slide.data('preview-image')).attr('itemprop','image');}
image.data('loaded',1);}},hasMultipleImages:function(){return gallery.jp_carousel('slides').length>1;}};$.fn.jp_carousel=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.open.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.jp_carousel');}};$(document.body).on('click.jp-carousel','div.gallery,div.tiled-gallery, a.single-image-gallery',function(e){if(!$(this).jp_carousel('testForData',e.currentTarget)){return;}
if($(e.target).parent().hasClass('gallery-caption')){return;}
e.preventDefault();e.stopPropagation();$(this).jp_carousel('open',{start_index:$(this).find('.gallery-item, .tiled-gallery-item').index($(e.target).parents('.gallery-item, .tiled-gallery-item'))});});if(1===Number(jetpackCarouselStrings.single_image_gallery)){processSingleImageGallery();$(document.body).on('post-load',function(){processSingleImageGallery();});}
$(window).on('hashchange.jp-carousel',function(){var hashRegExp=/jp-carousel-(\d+)/,matches,attachmentId,galleries,selectedThumbnail;if(!window.location.hash||!hashRegExp.test(window.location.hash)){if(gallery&&gallery.opened){container.jp_carousel('close');}
return;}
if((window.location.hash===last_known_location_hash)&&gallery.opened){return;}
if(window.location.hash&&gallery&&!gallery.opened&&history.back){history.back();return;}
last_known_location_hash=window.location.hash;matches=window.location.hash.match(hashRegExp);attachmentId=parseInt(matches[1],10);galleries=$('div.gallery, div.tiled-gallery, a.single-image-gallery');galleries.each(function(_,galleryEl){$(galleryEl).find('img').each(function(imageIndex,imageEl){if($(imageEl).data('attachment-id')===parseInt(attachmentId,10)){selectedThumbnail={index:imageIndex,gallery:galleryEl};return false;}});if(selectedThumbnail){$(selectedThumbnail.gallery).jp_carousel('openOrSelectSlide',selectedThumbnail.index);return false;}});});if(window.location.hash){$(window).trigger('hashchange');}});(function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:true};if(settings){$.extend(config,settings);}
this.each(function(){var startX;var startY;var isMoving=false;function cancelTouch(){this.removeEventListener('touchmove',onTouchMove);startX=null;isMoving=false;}
function onTouchMove(e){if(config.preventDefaultEvents){e.preventDefault();}
if(isMoving){var x=e.touches[0].pageX;var y=e.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=config.min_move_x){cancelTouch();if(dx>0){config.wipeLeft(e);}else{config.wipeRight(e);}}
else if(Math.abs(dy)>=config.min_move_y){cancelTouch();if(dy>0){config.wipeDown(e);}else{config.wipeUp(e);}}}}
function onTouchStart(e)
{if(e.touches.length===1){startX=e.touches[0].pageX;startY=e.touches[0].pageY;isMoving=true;this.addEventListener('touchmove',onTouchMove,false);}}
if('ontouchstart'in document.documentElement){this.addEventListener('touchstart',onTouchStart,false);}});return this;};})(jQuery);
var sharing_js_options;if(sharing_js_options&&sharing_js_options.counts){var WPCOMSharing={done_urls:[],get_counts:function(){var url,requests,id,service,service_request;if('undefined'===typeof WPCOM_sharing_counts){return;}
for(url in WPCOM_sharing_counts){id=WPCOM_sharing_counts[url];if('undefined'!==typeof WPCOMSharing.done_urls[id]){continue;}
requests={linkedin:['https://www.linkedin.com/countserv/count/share?format=jsonp&callback=updateLinkedInCount&url='+
encodeURIComponent(url)],pinterest:[window.location.protocol+'//api.pinterest.com/v1/urls/count.json?callback=WPCOMSharing.update_pinterest_count&url='+
encodeURIComponent(url)],facebook:[window.location.protocol+'//graph.facebook.com/?callback=WPCOMSharing.update_facebook_count&ids='+
encodeURIComponent(url)]};for(service in requests){if(!jQuery('a[data-shared=sharing-'+service+'-'+id+']').length){continue;}
while((service_request=requests[service].pop())){jQuery.getScript(service_request);}
WPCOMSharing.bump_sharing_count_stat(service);}
WPCOMSharing.done_urls[id]=true;}},get_permalink:function(url){if('https:'===window.location.protocol){url=url.replace(/^http:\/\//i,'https://');}else{url=url.replace(/^https:\/\//i,'http://');}
return url;},update_facebook_count:function(data){var url,permalink;if(!data){return;}
for(url in data){if(!data.hasOwnProperty(url)||!data[url].share||!data[url].share.share_count){continue;}
permalink=WPCOMSharing.get_permalink(url);if(!(permalink in WPCOM_sharing_counts)){continue;}
WPCOMSharing.inject_share_count('sharing-facebook-'+WPCOM_sharing_counts[permalink],data[url].share.share_count);}},update_linkedin_count:function(data){if('undefined'!==typeof data.count&&(data.count*1)>0){WPCOMSharing.inject_share_count('sharing-linkedin-'+WPCOM_sharing_counts[data.url],data.count);}},update_pinterest_count:function(data){if('undefined'!==typeof data.count&&(data.count*1)>0){WPCOMSharing.inject_share_count('sharing-pinterest-'+WPCOM_sharing_counts[data.url],data.count);}},inject_share_count:function(id,count){var $share=jQuery('a[data-shared='+id+'] > span');$share.find('.share-count').remove();$share.append('<span class="share-count">'+WPCOMSharing.format_count(count)+'</span>');},format_count:function(count){if(count<1000){return count;}
if(count>=1000&&count<10000){return String(count).substring(0,1)+'K+';}
return'10K+';},bump_sharing_count_stat:function(service){new Image().src=document.location.protocol+'//pixel.wp.com/g.gif?v=wpcom-no-pv&x_sharing-count-request='+service+'&r='+Math.random();}};}
var updateLinkedInCount=function(data){WPCOMSharing.update_linkedin_count(data);};(function($){var $body,$sharing_email;$.fn.extend({share_is_email:function(){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(this.val());}});$body=$(document.body).on('post-load',WPCOMSharing_do);$(document).ready(function(){$sharing_email=$('#sharing_email');$body.append($sharing_email);WPCOMSharing_do();});function WPCOMSharing_do(){var $more_sharing_buttons;if('undefined'!==typeof WPCOMSharing){WPCOMSharing.get_counts();}
$more_sharing_buttons=$('.sharedaddy a.sharing-anchor');$more_sharing_buttons.click(function(){return false;});$('.sharedaddy a').each(function(){if($(this).attr('href')&&$(this).attr('href').indexOf('share=')!==-1){$(this).attr('href',$(this).attr('href')+'&nb=1');}});$more_sharing_buttons.on('click',function(){var $more_sharing_button=$(this),$more_sharing_pane=$more_sharing_button.parents('div:first').find('.inner');if($more_sharing_pane.is(':animated')){return;}
if(true===$more_sharing_pane.data('justSlid')){return;}
$sharing_email.slideUp(200);$more_sharing_pane.css({left:$more_sharing_button.position().left+'px',top:$more_sharing_button.position().top+$more_sharing_button.height()+3+'px'}).slideToggle(200);});if(document.ontouchstart===undefined){$more_sharing_buttons.hover(function(){var $more_sharing_button=$(this),$more_sharing_pane=$more_sharing_button.parents('div:first').find('.inner'),timer;if(!$more_sharing_pane.is(':animated')){timer=setTimeout(function(){var handler_item_leave,handler_item_enter,handler_original_leave,handler_original_enter,close_it;$sharing_email.slideUp(200);$more_sharing_pane.data('justSlid',true);$more_sharing_pane.css({left:$more_sharing_button.position().left+'px',top:$more_sharing_button.position().top+$more_sharing_button.height()+3+'px'}).slideDown(200,function(){$more_sharing_button.data('hasoriginal',true).data('hasitem',false);setTimeout(function(){$more_sharing_pane.data('justSlid',false);},300);if($more_sharing_pane.find('.share-google-plus-1').length){return;}
$more_sharing_pane.mouseleave(handler_item_leave).mouseenter(handler_item_enter);$more_sharing_button.mouseleave(handler_original_leave).mouseenter(handler_original_enter);});handler_item_leave=function(){$more_sharing_button.data('hasitem',false);if($more_sharing_button.data('hasoriginal')===false){var timer=setTimeout(close_it,800);$more_sharing_button.data('timer2',timer);}};handler_item_enter=function(){$more_sharing_button.data('hasitem',true);clearTimeout($more_sharing_button.data('timer2'));};handler_original_leave=function(){$more_sharing_button.data('hasoriginal',false);if($more_sharing_button.data('hasitem')===false){var timer=setTimeout(close_it,800);$more_sharing_button.data('timer2',timer);}};handler_original_enter=function(){$more_sharing_button.data('hasoriginal',true);clearTimeout($more_sharing_button.data('timer2'));};close_it=function(){$more_sharing_pane.data('justSlid',true);$more_sharing_pane.slideUp(200,function(){setTimeout(function(){$more_sharing_pane.data('justSlid',false);},300);});$more_sharing_button.unbind('mouseleave',handler_original_leave).unbind('mouseenter',handler_original_enter);$more_sharing_pane.unbind('mouseleave',handler_item_leave).unbind('mouseenter',handler_item_leave);return false;};},200);$more_sharing_button.data('timer',timer);}},function(){$more_sharing_buttons.each(function(){clearTimeout($(this).data('timer'));});$more_sharing_buttons.data('timer',false);});}else{$(document.body).addClass('jp-sharing-input-touch');}
$(document).click(function(){$more_sharing_buttons.each(function(){clearTimeout($(this).data('timer'));});$more_sharing_buttons.data('timer',false);$('.sharedaddy .inner').slideUp();});$('.sharedaddy ul').each(function(){if('yep'===$(this).data('has-click-events')){return;}
$(this).data('has-click-events','yep');var printUrl=function(uniqueId,urlToPrint){$('body:first').append('<iframe style="position:fixed;top:100;left:100;height:1px;width:1px;border:none;" id="printFrame-'+uniqueId+'" name="printFrame-'+uniqueId+'" src="'+urlToPrint+'" onload="frames[\'printFrame-'+uniqueId+'\'].focus();frames[\'printFrame-'+uniqueId+'\'].print();"></iframe>');};$(this).find('a.share-print').click(function(){var ref=$(this).attr('href'),do_print=function(){if(ref.indexOf('#print')===-1){var uid=new Date().getTime();printUrl(uid,ref);}else{print();}};if($(this).parents('.sharing-hidden').length>0){$(this).parents('.inner').slideUp(0,function(){do_print();});}else{do_print();}
return false;});$(this).find('a.share-press-this').click(function(){var s='';if(window.getSelection){s=window.getSelection();}else if(document.getSelection){s=document.getSelection();}else if(document.selection){s=document.selection.createRange().text;}
if(s){$(this).attr('href',$(this).attr('href')+'&sel='+encodeURI(s));}
if(!window.open($(this).attr('href'),'t','toolbar=0,resizable=1,scrollbars=1,status=1,width=720,height=570')){document.location.href=$(this).attr('href');}
return false;});$('a.share-email',this).on('click',function(){var url=$(this).attr('href');if($sharing_email.is(':visible')){$sharing_email.slideUp(200);}else{$('.sharedaddy .inner').slideUp();$('#sharing_email .response').remove();$('#sharing_email form').show();$('#sharing_email form input[type=submit]').removeAttr('disabled');$('#sharing_email form a.sharing_cancel').show();if('object'===typeof grecaptcha&&'function'===typeof grecaptcha.reset&&window.___grecaptcha_cfg.count){grecaptcha.reset();}
$sharing_email.css({left:$(this).offset().left+'px',top:$(this).offset().top+$(this).height()+'px'}).slideDown(200);$('#sharing_email a.sharing_cancel').unbind('click').click(function(){$('#sharing_email .errors').hide();$sharing_email.slideUp(200);$('#sharing_background').fadeOut();return false;});$('#sharing_email input[type=submit]').unbind('click').click(function(){var form=$(this).parents('form');$(this).prop('disabled',true);form.find('a.sharing_cancel').hide();form.find('img.loading').show();$('#sharing_email .errors').hide();$('#sharing_email .error').removeClass('error');if(!$('#sharing_email input[name=source_email]').share_is_email()){$('#sharing_email input[name=source_email]').addClass('error');}
if(!$('#sharing_email input[name=target_email]').share_is_email()){$('#sharing_email input[name=target_email]').addClass('error');}
if($('#sharing_email .error').length===0){$.ajax({url:url,type:'POST',data:form.serialize(),success:function(response){form.find('img.loading').hide();if(response==='1'||response==='2'||response==='3'){$('#sharing_email .errors-'+response).show();form.find('input[type=submit]').removeAttr('disabled');form.find('a.sharing_cancel').show();if('object'===typeof grecaptcha&&'function'===typeof grecaptcha.reset){grecaptcha.reset();}}
else{$('#sharing_email form').hide();$sharing_email.append(response);$('#sharing_email a.sharing_cancel').click(function(){$sharing_email.slideUp(200);$('#sharing_background').fadeOut();return false;});}}});return false;}
form.find('img.loading').hide();form.find('input[type=submit]').removeAttr('disabled');form.find('a.sharing_cancel').show();$('#sharing_email .errors-1').show();return false;});}
return false;});});$('li.share-email, li.share-custom a.sharing-anchor').addClass('share-service-visible');}})(jQuery);